# Flutter Piper - Flutter Widgets for Piper

# Default recipe: list available commands
default:
    @just --list

# Run all tests
test:
    flutter test

# Run tests with coverage
test-coverage:
    flutter test --coverage
    @echo "Coverage report generated at coverage/lcov.info"

# Run tests with coverage and open HTML report (requires lcov)
test-coverage-html: test-coverage
    genhtml coverage/lcov.info -o coverage/html
    @echo "HTML report generated at coverage/html/index.html"
    open coverage/html/index.html || xdg-open coverage/html/index.html || echo "Open coverage/html/index.html in your browser"

# Analyze code for issues
analyze:
    flutter analyze

# Format all Dart files
format:
    dart format .

# Check formatting without changes
format-check:
    dart format --set-exit-if-changed .

# Get dependencies
deps:
    flutter pub get

# Clean build artifacts
clean:
    flutter clean

# Publish package
publish-dry-run:
    dart pub publish --dry-run

# Publish package
publish:
    dart pub publish

bump-version:
    dart run change_version --version-file pubspec.yaml

# Run tests and analyze
ci: deps analyze test